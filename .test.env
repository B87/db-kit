# =============================================================================
# Database Connection Configuration
# =============================================================================

# Basic PostgreSQL Connection Settings
POSTGRES_HOST=0.0.0.0
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=dbkit_test

# =============================================================================
# SSL/TLS Configuration
# =============================================================================

# SSL Mode: disable, require, verify-ca, verify-full
POSTGRES_SSL_MODE=disable

# SSL Certificate Paths (optional)
# POSTGRES_SSL_CERT=/path/to/client-cert.pem
# POSTGRES_SSL_KEY=/path/to/client-key.pem
# POSTGRES_SSL_ROOT_CERT=/path/to/ca-cert.pem

# =============================================================================
# Connection Pool Configuration
# =============================================================================

# Maximum number of open connections to the database
POSTGRES_MAX_OPEN_CONNS=25

# Maximum number of idle connections in the pool
POSTGRES_MAX_IDLE_CONNS=5

# Maximum lifetime of a connection (e.g., "5m", "1h")
POSTGRES_CONN_MAX_LIFETIME=5m

# Maximum idle time of a connection (e.g., "1m", "30s")
POSTGRES_CONN_MAX_IDLE_TIME=1m

# =============================================================================
# Connection Timeouts
# =============================================================================

# Connection timeout (e.g., "30s", "1m")
POSTGRES_CONNECT_TIMEOUT=30s

# Statement execution timeout (e.g., "30s", "5m")
POSTGRES_STATEMENT_TIMEOUT=30s

# =============================================================================
# Retry Configuration
# =============================================================================

# Number of retry attempts for transient failures
POSTGRES_RETRY_ATTEMPTS=3

# Initial delay between retries (e.g., "100ms", "1s")
POSTGRES_RETRY_DELAY=100ms

# Maximum delay between retries (e.g., "5s", "30s")
POSTGRES_RETRY_MAX_DELAY=5s

# =============================================================================
# Logging Configuration
# =============================================================================

# Log level: DEBUG, INFO, WARN, ERROR
POSTGRES_LOG_LEVEL=INFO

# =============================================================================
# Application Paths
# =============================================================================

# Directory containing Goose migrations
# Note: In CI/CD environments, these will be overridden with temp directories
MIGRATIONS_DIR=/tmp/test_migrations

# Directory for database backups
# Note: In CI/CD environments, these will be overridden with temp directories
BACKUPS_DIR=/tmp/test_backups

# =============================================================================
# Development/Testing Configuration
# =============================================================================

# For development with embedded PostgreSQL
# POSTGRES_HOST=0.0.0.0
# POSTGRES_PORT=5432
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres
# POSTGRES_DB=dbkit_dev

# For testing environment
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres
# POSTGRES_DB=dbkit_test
# POSTGRES_SSL_MODE=disable
# POSTGRES_LOG_LEVEL=DEBUG

# =============================================================================
# Production Configuration Example
# =============================================================================

# For production environment (uncomment and modify as needed)
# POSTGRES_HOST=your-production-db-host.com
# POSTGRES_PORT=5432
# POSTGRES_USER=your_production_user
# POSTGRES_PASSWORD=your_secure_password
# POSTGRES_DB=your_production_db
# POSTGRES_SSL_MODE=require
# POSTGRES_SSL_CERT=/path/to/production-cert.pem
# POSTGRES_SSL_KEY=/path/to/production-key.pem
# POSTGRES_SSL_ROOT_CERT=/path/to/production-ca.pem
# POSTGRES_MAX_OPEN_CONNS=50
# POSTGRES_MAX_IDLE_CONNS=10
# POSTGRES_CONN_MAX_LIFETIME=1h
# POSTGRES_CONN_MAX_IDLE_TIME=5m
# POSTGRES_CONNECT_TIMEOUT=10s
# POSTGRES_STATEMENT_TIMEOUT=30s
# POSTGRES_RETRY_ATTEMPTS=5
# POSTGRES_RETRY_DELAY=200ms
# POSTGRES_RETRY_MAX_DELAY=10s
# POSTGRES_LOG_LEVEL=WARN
# MIGRATIONS_DIR=/app/migrations
# BACKUPS_DIR=/app/backups